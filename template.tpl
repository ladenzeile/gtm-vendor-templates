___TERMS_OF_SERVICE___

 By creating or modifying this file you agree to Google Tag Manager's Community
 Template Gallery Developer Terms of Service available at 
 https://developers.google.com/tag-manager/gallery-tos (or such other URL as 
 Google may provide), as modified from time to time.
 
 ___INFO___

{
"displayName": "Sales Tracking Ladenzeile",
"description": "The Ladenzeile Sales Tracking is an analytics tool that allows you to measure the effectiveness of your advertising in  LadenZeline / ShopAlike.",
"categories": ["CONVERSION_TRACKING"],
"securityGroups": [],
"id": "cvt_temp_public_id",
"type": "TAG",
"version": 1,
"brand": {
"thumbnail": "data:image/png;base64,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",
"displayName": "",
"id": "brand_dummy"
},
"containerContexts": [
"WEB"
]
}


___TEMPLATE_PARAMETERS___

[
{
"valueValidators": [
{
"type": "NON_EMPTY"
}
],
"displayName": "Ladenzeile Tracking Id",
"simpleValueType": true,
"name": "trackingId",
"type": "TEXT"
},
{
"valueValidators": [
{
"type": "NON_EMPTY"
}
],
"displayName": "Amount",
"simpleValueType": true,
"name": "amount",
"type": "TEXT"
},
{
"valueValidators": [
{
"type": "NON_EMPTY"
}
],
"displayName": "SKUs",
"simpleValueType": true,
"name": "skus",
"type": "TEXT"
},
{
"valueValidators": [
{
"type": "NON_EMPTY"
}
],
"displayName": "Prices",
"simpleValueType": true,
"name": "prices",
"type": "TEXT"
},
{
"valueValidators": [
{
"type": "NON_EMPTY"
},
{
"args": [
"^[A-Z]{3}$"
],
"type": "REGEX"
}
],
"displayName": "Currency",
"simpleValueType": true,
"name": "currency",
"type": "TEXT"
},
{
"macrosInSelect": false,
"selectItems": [
{
"displayValue": "Austria",
"value": "at"
},
{
"displayValue": "Germany",
"value": "de"
},
{
"displayValue": "Czech Republic",
"value": "cz"
},
{
"displayValue": "Denmark",
"value": "dk"
},
{
"displayValue": "Finland",
"value": "fi"
},
{
"displayValue": "France",
"value": "fr"
},
{
"displayValue": "Hungary",
"value": "hu"
},
{
"displayValue": "Italy",
"value": "it"
},
{
"displayValue": "Netherlands",
"value": "nl"
},
{
"displayValue": "Poland",
"value": "pl"
},
{
"displayValue": "Spain",
"value": "es"
},
{
"displayValue": "Sweden",
"value": "se"
},
{
"displayValue": "Slovakia",
"value": "sk"
}
],
"valueValidators": [
{
"type": "NON_EMPTY"
}
],
"displayName": "Shop Country",
"simpleValueType": true,
"name": "domain",
"type": "SELECT"
}
]


___WEB_PERMISSIONS___

[
{
"instance": {
"key": {
"publicId": "logging",
"versionId": "1"
},
"param": [
{
"key": "environments",
"value": {
"type": 1,
"string": "debug"
}
}
]
},
"isRequired": true
},
{
"instance": {
"key": {
"publicId": "send_pixel",
"versionId": "1"
},
"param": []
},
"isRequired": true
}
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// require relevant API
const encodeUriComponent = require('encodeUriComponent');
const getTimestamp = require('getTimestamp');
const log = require('logToConsole');
const query = require('queryPermission');
const sendPixel = require('sendPixel');

let host ='shopalike.'+ encodeUriComponent(data.domain) ;

if(data.domain === 'de' || data.domain === 'at'){
host= 'ladenzeile.'+ encodeUriComponent(data.domain) ;
}

// use the provided APIs to do things like send pixels
const url = 'https://www.'+encodeUriComponent(host)+'/controller/visualMetaTrackingJs?cb=' +  encodeUriComponent(getTimestamp().toString())+
'&trackingId='+  encodeUriComponent(data.trackingId)+
'&version=a_0.0.1'+
'&type=confirmed'+
'&amount='+  encodeUriComponent(data.amount)+
'&skus='+  encodeUriComponent(data.skus)+
'&prices='+  encodeUriComponent(data.prices)+
'&currency='+  encodeUriComponent(data.currency);

if (query('send_pixel', url)) {
sendPixel(url, data.gtmOnSuccess, data.gtmOnFailure);
}

log('data =', data);
// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___NOTES___

Created on 8/23/2019, 12:05:17 PM
